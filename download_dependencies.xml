<?xml version="1.0"?>

<project name="JMeter" default="download_packages" basedir=".">

    <property name="maven.ant.tasks.dir" value="=lib/build"/>
    <property name="maven.ant.tasks.filename" value="=maven-ant-tasks-2.1.3.jar"/>
    <property name="maven.ant.tasks.remote.path" value="=http://mirror.catn.com/pub/apache//maven/binaries"/>
    <property name="maven.ant.tasks.remote.file" value="=${maven.ant.tasks.remote.path}/${maven.ant.tasks.filename}"/>

    <available file="${maven.ant.tasks.dir}/${maven.ant.tasks.filename}" property="maven.ant.tasks.file.exists"/>

    <target name="start" unless="maven.ant.tasks.file.exists">
        <mkdir dir="${maven.ant.tasks.dir}"/>
        <get src="${maven.ant.tasks.remote.file}" dest="${maven.ant.tasks.dir}"/>
    </target>

    <target name="download_packages" description="Run the stand-alone Findbugs detector" depends="start" xmlns:artifact="urn:maven-artifact-ant">

        <path id="maven.ant.tasks.classpath" path="${maven.ant.tasks.dir}/${maven.ant.tasks.filename}"/>
        <typedef resource="org/apache/maven/artifact/ant/antlib.xml" uri="urn:maven-artifact-ant" classpathref="maven.ant.tasks.classpath"/>

        <artifact:pom id="jmeter.parent.pom" file="maven/ApacheJMeter_parent.pom"/>
        <artifact:dependencies filesetId="jmeter.dependencies" pomRefId="jmeter.parent.pom"/>
        <copy todir="lib">
            <fileset refid="jmeter.dependencies"/>
            <mapper type="flatten"/>
        </copy>
    </target>

</project>